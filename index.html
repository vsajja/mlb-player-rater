<!DOCTYPE HTML>
<html>
<head>
    <title>⚾ Vinny's Fantasy Baseball</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
    <link rel="stylesheet" href="assets/css/main.css"/>
    <link rel="stylesheet" type="text/css"
          href="https://cdn.datatables.net/v/dt/jszip-2.5.0/dt-1.10.25/b-1.7.1/b-colvis-1.7.1/b-html5-1.7.1/b-print-1.7.1/date-1.1.0/r-2.2.9/datatables.min.css"/>

    <noscript>
        <link rel="stylesheet" href="assets/css/noscript.css"/>
    </noscript>
</head>

<style>
	.f32 .flag {
        vertical-align: middle;
        margin: -8px 0;
    }

    progress {
        width: 100%;
    }

    .group {
        background: gray;
        text-align: center;
    }

    table{
        border: 1px solid black;
    }

</style>


<body class="is-preload">

<!-- Wrapper -->
<div id="wrapper" class="fade-in">
    <!-- Intro -->
    <div id="intro">
        <h1>⚾ Welcome to ⚾</h1><br/>
        <h2>Vinny's Fantasy Baseball</h2>
        <p>A free set of rotisserie player ratings and tools for the 2021 season. Updated frequently!
        <ul class="actions">
            <li><a href="#header" class="button icon solid solo fa-arrow-down scrolly">Continue</a></li>
        </ul>
    </div>

    <!-- Nav -->
    <nav id="nav">
        <ul class="links">
            <li class="active"><a href="index.html">Player Rater</a></li>
        </ul>
        <ul class="icons">
            <li><a href="https://twitter.com/vsajja" target="_blank" class="icon brands fa-twitter"><span class="label">Twitter</span></a>
            </li>
        </ul>
    </nav>

    <!-- Main -->
    <div id="main">
        <div class="table-wrapper">
            <table id="example" class="display nowrap" style="width:100%">
                <thead>
                <tr>
                    <th>Z-Score</th>
                    <th>Player</th>
                    <th>Position</th>
                    <th>Age</th>
                    <th>Stats</th>
                </tr>
                </thead>
                <tfoot>
                <tr>
                    <th>Z-Score</th>
                    <th>Player</th>
                    <th>Position</th>
                    <th>Age</th>
                    <th>Stats</th>
                </tr>
                </tfoot>
            </table>
        </div>

        <!-- Footer -->
        <footer>
        </footer>

    </div>

    <!-- Footer -->
    <footer id="footer">

    </footer>

    <!-- Copyright -->
    <div id="copyright">
        <ul>
            <li>&copy; 2021 Vinny's Fantasy Baseball</li>
            <li>Design: <a href="https://html5up.net" target="_blank">HTML5 UP</a></li>
        </ul>
    </div>

</div>

<!-- Scripts -->
<script src="assets/js/jquery.min.js"></script>
<script src="assets/js/jquery.scrollex.min.js"></script>
<script src="assets/js/jquery.scrolly.min.js"></script>
<script src="assets/js/browser.min.js"></script>
<script src="assets/js/breakpoints.min.js"></script>
<script src="assets/js/util.js"></script>
<script src="assets/js/main.js"></script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/pdfmake.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/vfs_fonts.js"></script>
<script type="text/javascript"
        src="https://cdn.datatables.net/v/dt/jszip-2.5.0/dt-1.10.25/b-1.7.1/b-colvis-1.7.1/b-html5-1.7.1/b-print-1.7.1/date-1.1.0/r-2.2.9/datatables.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/rowgroup/1.1.3/js/dataTables.rowGroup.min.js"></script>

<script>
    $(document).ready(function() {
        var table = $('#example').DataTable({
            ajax: './data/player_ratings.json',
            "pageLength": 50,
            "ordering": true,
            "order": [[ 0, "desc" ]],
             "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]], // page length options
            dom: 'Blfrtip',
            buttons: [
                'copy', 'csv', 'excel', 'pdf', 'print'
            ],
            rowGroup: {
                dataSrc: function ( row ) {
                    var zScore = row.zScore;

                    if(zScore > 2) {
                        return '<div class="group"><b>Tier 1</b></div>';
                    }
                    else if(zScore >= 1.5 && zScore < 2) {
                        return '<div class="group"><b>Tier 2</b></div>';
                    }
                    else if(zScore >= 1 && zScore < 1.5) {
                        return '<div class="group"><b>Tier 3</b></div>';
                    }
                    else if(zScore >= 0.5 && zScore < 1) {
                        return '<div class="group"><b>Tier 4</b></div>';
                    }
                    else if(zScore >= 0 && zScore < 0.5) {
                        return '<div class="group"><b>Tier 5</b></div>';
                    }
                    else if(zScore >= -0.5 && zScore < -0) {
                        return '<div class="group"><b>Tier 6</b></div>';
                    }
                    else if(zScore >= -1 && zScore < -0.5) {
                        return '<div class="group"><b>Tier 7</b></div>';
                    }
                    else if(zScore < 1) {
                        return '<div class="group"><b>Tier 8</b></div>';
                    }
                    else {
                        return '<div class="group"><b>Tier 8</b></div>';
                    }
                }
            },
            'columnDefs': [
                {
                    "targets": 0,
                    "className": "dt-center",
                    "orderable": true,
                },
                {
                    "targets": 1,
                    "className": "dt-center",
                    "orderable": true
                },
                {
                    "targets": 2,
                    "className": "dt-center",
                    "orderable": false
                },
                {
                    "targets": 3,
                    "className": "dt-center",
                    "orderable": true
                },
                {
                    "targets": 3,
                    "className": "dt-center",
                    "orderable": false
                }
            ],
            columns: [
                {
                    "render": function ( data, type, row ) {
                        return '<b>' + row.zScore.toFixed(3) + '</b>'
                    }
                },
                {
                    "render": function ( data, type, row ) {
                        return '<b><img src="https://content.mlb.com/images/headshots/current/60x60/' + row.mlbPlayerId + '@1x.png"> <br/>'
                        + row.nameFirst + ' ' + row.nameLast
                    }
                },
                {
                    "render": function ( data, type, row ) {
                        var position = row.position;

                        if (['LF', 'CF', 'RF'].indexOf(position) > -1) {
                            position = 'OF'
                        }

                        return '<b>' + position + '</b>'
                    }
                },
                {
                    "render": function ( data, type, row ) {
                        return '<b>' + row.age + '</b>'
                    }
                },
                {
                    "render": function ( data, type, row ) {
                        var seasonHittingStats = row.seasonHittingStats

                        var stats = null;

                        if(seasonHittingStats != null) {
                            var hits = seasonHittingStats['hits']
                            var atBats = seasonHittingStats['atBats']
                            var runs = seasonHittingStats['runs']
                            var homeRuns = seasonHittingStats['homeRuns']
                            var rbis = seasonHittingStats['rbis']
                            var stolenBases = seasonHittingStats['stolenBases']

                            var avg = seasonHittingStats['avg'].toFixed(3)
                            var obp = seasonHittingStats['obp'].toFixed(3)
                            var slg = seasonHittingStats['slg'].toFixed(3)
                            var ops = seasonHittingStats['ops'].toFixed(3)

                            return '<b>' + avg + '/' + obp + '/' + slg + '<br/> '
                                    + runs + 'R '
                                    + homeRuns + 'HR '
                                    + rbis + 'RBI '
                                    + stolenBases + 'SB </b>'
                        }
                        else {
                            return 'N/A'
                        }
                    }
                }
            ]
        });
    });
</script>

</body>
</html>